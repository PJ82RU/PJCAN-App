# PJCAN App
CANBUS project for Mazda 3



# API 4.0



### Bluetooth:

* name `PJCAN`
* uuid server `cc9e7b30-9834-488f-b762-aa62f5022dd4`
* uuid characteristic `cc9e7b30-9834-488f-b762-aa62f5022dd4`



### Структура пакетов конфигурации:

* **Общая конфигурация:**

  > **запрос:**
  >
  > uint8_t `id` = `0x01`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x01`
  > 
  > uint8_t  `data[201]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >        uint8_t version[4];     // версия прошивки
  > >        device_t device;        // параметры устройства
  > >        buttons_t buttons;      // параметры кнопок
  > >        car_t car;              // параметры автомобиля
  > >        teyes_t teyes;          // параметры Teyes
  > >        variable_t variable;    // параметры переменных
  > >}
  > >```



* `device_t` **Параметры устройства:**

  > uint8_t `id` = `0x0a`
  > 
  > uint8_t  `data[64]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >        char serial[64];        // серийный номер
  > >}
  > >```



* `buttons_t` **Параметры кнопок:**

  > uint8_t `id` = `0x14`
  >
  > uint8_t  `data[63]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >typedef struct
  > >{
  > >        uint8_t hold;           // время удержания кнопки, сек.
  > >        uint16_t inR;           // сопротивление нажатий
  > >        uint16_t outR;          // сопротивление эмуляции нажатий
  > >        uint8_t exec[5];        // список ID функций кнопки
  > >} item_t
  > >
  > >struct
  > >{
  > >        bool enabled: 1;        // вкл/выкл кнопок
  > >        bool out: 1;            // вкл/выкл эмуляции кнопок
  > >        bool reset: 1;          // сбросить значения
  > >        bool sendValue: 1;      // отправлять значение нажатой кнопки
  > >        bool nop: 4;
  > >        uint16_t range;         // диапазон сигнала
  > >        item_t items[6];        // настройки кнопок
  > >}
  > >```
  > >
  > >**Список ID функций кнопки**:
  > >
  > >`exec[0]` Кнопка отпущена
  > >
  > >`exec[1]` Кнопка нажата один раз
  > >
  > >`exec[2]` Кнопка нажата два раза
  > >
  > >`exec[3]` Кнопка нажата три раза
  > >
  > >`exec[4]` Удержание кнопки
  > >
  > >
  > >
  > >
  > >Значение `exec[..]`:
  > >
  > > >`0` Кнопка отпущена
  > > >
  > > >`1` Кнопка mode
  > > >
  > > >`2` Кнопка set up
  > > >
  > > >`3` Кнопка set down
  > > >
  > > >`4` Кнопка уровень звука +
  > > >
  > > >`5` Кнопка уровень звука -
  > > >
  > > >`6` Кнопка выкл. звука
  > > >
  > > >`7` Кнопка Clock на LCD (нажата)
  > > >
  > > >`8` Кнопка Clock на LCD (отпущена)
  > > >
  > > >`9` Кнопка Clock H на LCD (нажата)
  > > >
  > > >`10` Кнопка Clock H на LCD (отпущена)
  > > >
  > > >`11` Кнопка Clock M на LCD (нажата)
  > > >
  > > >`12` Кнопка Clock M на LCD (отпущена)
  > > >
  > > >`13` Кнопка Info на LCD (нажата)
  > > >
  > > >`14` Кнопка Info на LCD (отпущена)
  > > >
  > > >`15` Кнопка показать значения ДВС
  > > >
  > > >`16` Кнопка показать значения расхода
  > > >
  > > >`17` Кнопка показать значения движения
  > > >
  > > >`18` Кнопка показать значения температуру



* `car_t` **Параметры автомобиля:**

  > uint8_t `id` = `0x32`
  > 
  > uint8_t  `data[48]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >        bool lcd: 1;            // вкл. вывод данных на lcd
  > >        bool nop: 7;
  > >        uint8_t car_model;      // модель автомобиля
  > >        char logo[13];          // логотип (последний символ не отображается)
  > >        char hello[33];         // текст приветствия (последний символ не отображается)
  > >}
  > >```
  > >
  > > **Модели автомобиля** `car_model`:
  > > 
  > > >`0` Неизвестно
  > > >
  > > >`1` Mazda 3 BK
  > > >
  > > >`2` Mazda CX7



* `teyes_t` **Параметры Teyes:**

  > uint8_t `id` = `0x1e`
  >
  > uint8_t  `data[1]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >        bool receive_clock: 1;      // принимать время ГУ
  > >        bool receive_buttons: 1;    // принимать кнопки ГУ: CLOCK, HOUR, MIN
  > >        bool receive_text: 1;       // принимать текст ГУ (название радиостанций и др.)
  > >        bool send_button: 1;        // отправлять ГУ нажатие кнопок на руле 
  > >        bool send_climate: 1;       // отправлять ГУ значения климата
  > >        bool send_doors: 1;         // отправлять ГУ статусы дверей автомобиля
  > >        bool parse_volume: 1;       // парсинг значения уровня звука ГУ
  > >        bool lcd_show: 1;           // показать текст ГУ на LCD экране
  > >}
  > >```



* `variable_t` **Параметры переменных:**

  > **запрос:**
  >
  > uint8_t `id` = `0x64`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x64`
  > 
  > uint8_t  `data[22]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >        bose_t bose;            // параметры Bose
  > >        engine_t engine;        // параметры ДВС
  > >        fuel_t fuel;            // параметры расхода топлива
  > >        volume_t volume;        // параметры уровня звука
  > >}
  > >```



* `bose_t` **Параметры Bose:**

  > uint8_t `id` = `0x6e`
  > 
  > uint8_t  `data[6]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >        bool enabled: 1;        // вкл/выкл
  > >        bool audioPLT: 1;       // audio PLT
  > >        bool radioFM: 1;        // radio FM или AM
  > >        bool wow: 1;            // wow
  > >        bool nop: 4;
  > >        int8_t balance;         // баланс (от -8 до +8)
  > >        int8_t bass;            // бас (от -6 до +6)
  > >        int8_t fade;            // fade (от -8 до +8)
  > >        int8_t treble;          // treble (от -6 до +6)
  > >        uint8_t centerPoint;    // center point
  > >}
  > >```
  > >
  > >**Значения Center Point** `centerPoint`:
  > >
  > > >`0` off
  > > >
  > > >`1` min
  > > >
  > > >`2` low
  > > >
  > > >`3` mid
  > > >
  > > >`4` hi
  > > >
  > > >`5` max



* `engine_t` **Параметры ДВС:**

  > uint8_t `id` = `0x8d`
  > 
  > uint8_t  `data[9]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >        bool show_days: 1;          // показывать в статистике дни
  > >        bool nop: 7;
  > >        uint32_t total_seconds;     // общее время работы двигателя
  > >        uint32_t total_count_rpm;   // общее количество оборотов (RPM)
  > >}
  > >```



* `fuel_t` **Параметры расхода топлива:**

  > uint8_t `id` = `0x97`
  > 
  > uint8_t  `data[4]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >        float ratio;        // коэффициент расхода топлива
  > >}
  > >```



* `volume_t` **Параметры уровня звука:**

  > uint8_t `id` = `0xc9`
  >
  > uint8_t  `data[3]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >        bool mute: 1;       // Выкл. звук
  > >        bool nop: 7;
  > >        uint8_t volume;     // Уровень звука
  > >        uint8_t max;        // Максимальный уровень звука
  > >}
  > >```



### Структура пакетов конфигурации отображения на LCD экране:

**Общая структура отображения:**

```c++
struct {
    bool enabled: 1;        // вкл/выкл отображения
    bool nop: 7;
    uint8_t type;           // тип отображения текста
    uint16_t time;          // время отображения на LCD, сек.
} view_t;
```
**Значения типов отображения** `type`:

> `0` Простое отображение текста
> 
> `1` Мигающий текст
> 
> `2` Бегущая строка



* **Общая конфигурация отображения:**

  > **запрос:**
  >
  > uint8_t `id` = `0x02`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x02`
  >
  > uint8_t  `data[108]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >         car_t car;              // параметры автомобиля
  > >         view_t teyes;           // параметры Teyes
  > >         variable_t variable;    // параметры переменных
  > >}
  > >```



* `car_t` **Параметры отображения автомобиля:**

  > uint8_t `id` = `0x33`
  >
  > uint8_t  `data[8]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >         view_t logo;        // параметры отображения логотипа
  > >         view_t hello;       // параметры отображения текста приветствия
  > >}
  > >```



* `view_t` **Параметры отображения Teyes:**

  > uint8_t `id` = `0x20`
  >
  > uint8_t  `data[4]` = [..]



* `variable_t` **Параметры отображения переменных:**

  > **запрос:**
  >
  > uint8_t `id` = `0x65`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x65`
  >
  > uint8_t  `data[96]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >        view_t bose;            // параметры отображения Bose
  > >        view_t climate;         // параметры отображения климата
  > >        view_t clock;           // параметры отображения часов
  > >        view_t doors;           // параметры отображения дверей
  > >        engine_t engine;        // параметры отображения ДВС
  > >        fuel_t fuel;            // параметры отображения расхода топлива
  > >        movement_t movement;    // параметры отображения движения
  > >        sensors_t sensors;      // параметры отображения датчиков
  > >        view_t temperature;     // параметры отображения температуры
  > >        view_t volume;          // параметры отображения уровня звука
  > >}
  > >```



* `view_t` **Параметры отображения Bose:**

  > uint8_t `id` = `0x6f`
  >
  > uint8_t  `data[4]` = [..]



* `view_t` **Параметры отображения климата:**

  > uint8_t `id` = `0x79`
  >
  > uint8_t  `data[4]` = [..]



* `view_t` **Параметры отображения дверей:**

  > uint8_t `id` = `0x83`
  >
  > uint8_t  `data[4]` = [..]



* `engine_t` **Параметры отображения ДВС:**

  > uint8_t `id` = `0x8e`
  >
  > uint8_t  `data[28]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >        view_t enabled;             // параметры отображения запуска/остановки двигателя
  > >        view_t total_seconds;       // параметры отображения общего времени работы двигателя
  > >        view_t total_count_rpm;     // параметры отображения общего количества оборотов (RPM)
  > >        view_t coolant;             // параметры отображения охлаждающей жидкости
  > >        view_t rpm;                 // параметры отображения текущее количество оборотов (RPM)
  > >        view_t load;                // параметры отображения текущая нагрузка на двигатель, %
  > >        view_t throttle;            // параметры отображения положения дроссельной заслонки, %
  > >}
  > >```



* `fuel_t` **Параметры отображения расхода топлива:**

  > uint8_t `id` = `0x98`
  >
  > uint8_t  `data[16]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >        view_t consumption;
  > >        view_t current;          // параметры отображения текущего расхода топлива
  > >        view_t avg;              // параметры отображения среднего расхода топлива
  > >        view_t total;
  > >}
  > >```



* `movement_t` **Параметры отображения движения:**

  > uint8_t `id` = `0xa1`
  >
  > uint8_t  `data[12]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >        view_t speed;            // параметры отображения текущей скорости автомобиля
  > >        view_t speed_avg;        // параметры отображения средней скорости автомобиля
  > >        view_t rest_way;         // параметры отображения км. оставшегося пути
  > >}
  > >```



* `sensors_t` **Параметры отображения датчиков:**

  > uint8_t `id` = `0xab`
  >
  > uint8_t  `data[16]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >       view_t handbrake;        // параметры отображения положения ручника
  > >       view_t reverse;          // параметры отображения статуса заднего хода
  > >       view_t seatbelt;         // параметры отображения статуса ремней безопасности
  > >       view_t signal;           // параметры отображения сигнала поворотников
  > >}
  > >```



* `view_t` **Параметры отображения температуры:**

  > uint8_t `id` = `0xb5`
  >
  > uint8_t  `data[4]` = [..]



* `view_t` **Параметры отображения уровня звука:**

  > uint8_t `id` = `0xca`
  >
  > uint8_t  `data[4]` = [..]



### Структура пакетов значений

* **Общие значения:**

  > **запрос:**
  >
  > uint8_t `id` = `0x03`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x03`
  >
  > uint8_t  `data[138]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >         device_t device;            // значения устройства
  > >         lcd_t lcd;                  // значения LCD
  > >         variable_t variable;        // значения переменных
  > >}
  > >```



* `device_t` **Значения устройства:**

  > uint8_t `id` = `0x0b`
  >
  > uint8_t  `data[42]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >        bool reboot: 1;             // перезагрузка устройства
  > >        bool reset_config: 1;       // сбросить конфигурацию
  > >        bool reset_view: 1;         // сбросить конфигурацию отображения
  > >        bool activation: 1;         // статус активации
  > >        bool save: 1;               // сохранить данные принудительно
  > >        bool nop: 3;
  > >        led_t led: 8;               // состояние мигания светодиода
  > >        uint8_t sha[32];            // хеш устройства
  > >        uint64_t worktime;          // время работы устройства
  > >}
  > >```
  > >`led_t` **Значения состояния мигания светодиода**:
  > >
  > > >`0` Светодиод не горит
  > > >
  > > >`1` Светодиод горит
  > > >
  > > >`2` Светодиод мигает с указанным интервалом
  > > >
  > > >`3` Двойное мигание светодиодом, с указанным интервалом
  > > >
  > > >`4` Тройное мигание светодиодом, с указанным интервалом



* `lcd_t` **Значения LCD:**

  > uint8_t `id` = `0x28`
  >
  > uint8_t  `data[42]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >        bool reboot: 1;             // перезагрузка устройства
  > >        bool reset_config: 1;       // сбросить конфигурацию
  > >        bool reset_view: 1;         // сбросить конфигурацию отображения
  > >        bool activation: 1;         // статус активации
  > >        bool save: 1;               // сохранить данные принудительно
  > >        bool nop: 3;
  > >        led_t led: 8;               // состояние мигания светодиода
  > >        uint8_t sha[32];            // хеш устройства
  > >        uint64_t worktime;          // время работы устройства, мс
  > >}
  > >```



* `variable_t` **Значения переменных:**

  > **запрос:**
  >
  > uint8_t `id` = `0x66`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x66`
  >
  > uint8_t  `data[81]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >         climate_t climate;              // значения климата
  > >         clock_t clock;                  // значения времени
  > >         doors_t doors;                  // значения дверей автомобиля
  > >         engine_t engine;                // значения ДВС
  > >         fuel_t fuel;                    // значения расхода топлива
  > >         movement_t movement;            // значения движения
  > >         sensors_t sensors;              // значения датчиков
  > >         temperature_t temperature;      // значения температуры
  > >         volume_t volume;                // значения уровня звука
  > >}
  > >```



* `variable_t` **Значения климата:**

  > **запрос:**
  >
  > uint8_t `id` = `0x78`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x78`
  >
  > uint8_t  `data[9]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >        bool enabled: 1;                // статус работы блока климата
  > >        bool automode: 1;               // автоматический режим работы блока климата
  > >        bool ac: 1;                     // статус работы кондиционера
  > >        bool air_dlegs: 1;              // направление воздушного потока в ноги
  > >        bool air_dbody: 1;              // направление воздушного потока в туловище
  > >        bool air_dwindshield: 1;        // направление воздушного потока в ветровое стекло
  > >        bool visible: 1;                // показать значения климата на LCD
  > >        bool nop: 1;
  > >        uint8_t air_rate;               // скорость воздушного потока (от минимального 1 до максимального 7)
  > >        uint8_t air_type;               // вентиляция салона
  > >        uint8_t temp_type;              // измерение температуры (градусы Цельсия или Фаренгейта)
  > >        uint8_t temp_display;           // отображение температуры
  > >        float temperature;              // температура
  > >}
  > >```
  > >**Тип вентиляции салона** `air_type`:
  > >
  > > >`0` Нет вентиляции
  > > >
  > > >`1` Забор воздуха из кабины пилота
  > > >
  > > >`2` Забор воздуха снаружи самолета
  > >
  > >**Тип измерения температуры** `temp_type`:
  > >
  > > >`0` по Хую
  > > >
  > > >`1` по Цельсию
  > > >
  > > >`2` по Фаренгейту



* `clock_t` **Значения времени:**

  > uint8_t  `data[3]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >        uint8_t hour;           // часы
  > >        uint8_t minutes;        // минуты
  > >        uint8_t seconds;        // секунды
  > >}
  > >```



* `doors_t` **Значения дверей автомобиля:**

  > **запрос:**
  >
  > uint8_t `id` = `0x82`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x82`
  >
  > uint8_t  `data[1]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >         bool front_left: 1;         // передняя левая дверь
  > >         bool front_right: 1;        // передняя правая дверь
  > >         bool back_left: 1;          // задняя левая дверь
  > >         bool back_right: 1;         // задняя правая дверь
  > >         bool trunk: 1;              // багажник
  > >         bool nop: 3;
  > >}
  > >```



* `engine_t` **Значения ДВС:**

  > **запрос:**
  >
  > uint8_t `id` = `0x8c`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x8c`
  >
  > uint8_t  `data[28]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >        bool enabled: 1;                // статус работы двигателя
  > >        bool nop: 7;
  > >        int8_t coolant;                 // температура охлаждающей жидкости
  > >        uint16_t rpm;                   // количество оборотов коленчатого вала (RPM)
  > >        uint32_t mseconds;              // время работы двигателя с момента его запуска, мс
  > >        uint32_t total_seconds;         // счетчик моточасов, сек.
  > >        uint32_t total_count_rpm;       // счетчик коленчатого вала (RPM)
  > >        float count_rpm;                // счетчик RPM с момента запуска двигателя
  > >        float load;                     // нагрузка на ДВС, %
  > >        float throttle;                 // положение дроссельной заслонки, %
  > >}
  > >```



* `fuel_t` **Значения расхода топлива:**

  > **запрос:**
  >
  > uint8_t `id` = `0x96`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x96`
  >
  > uint8_t  `data[16]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >        float consumption;      // текущий расход топлива, л/ч (экспериментальное значение)
  > >        float current;          // текущий расход топлива, л/100 км
  > >        float avg;              // средний расход топлива, л/100 км
  > >        float total;            // текущее количество топлива, л (экспериментальное значение)
  > >}
  > >```



* `movement_t` **Значения движения:**

  > **запрос:**
  >
  > uint8_t `id` = `0xa0`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0xa0`
  >
  > uint8_t  `data[12]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >         float speed;            // скорость автомобиля, км/ч
  > >         float speed_avg;        // средняя скорость, км/ч
  > >         float rest_way;         // остаток пути, км
  > >}
  > >```



* `sensors_t` **Значения датчиков:**

  > **запрос:**
  >
  > uint8_t `id` = `0xaa`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0xaa`
  >
  > uint8_t  `data[2]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >        bool acc: 1;                    // статус ACC
  > >        bool handbrake: 1;              // положение ручного тормоза
  > >        bool reverse: 1;                // задний ход
  > >        bool seatbelt_driver: 1;        // статус ремня безопасности водителя
  > >        bool seatbelt_passenger: 1;     // статус ремня безопасности пассажира
  > >        bool nop: 3;
  > >        uint8_t signal;                 // сигнал поворотника
  > >}
  > >```
  > >**Тип сигала поворотника** `signal`:
  > >
  > > >`0` Выключен
  > > >
  > > >`1` Левый сигнал поворота
  > > >
  > > >`2` Правый сигнал поворота
  > > >
  > > >`3` Сигнал аварийной остановки



* `temperature_t` **Значения температуры:**

  > **запрос:**
  >
  > uint8_t `id` = `0xb4`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0xb4`
  >
  > uint8_t  `data[8]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >         float in;       // температура в салоне (показывает температуру окружающего среды, хз почему так)
  > >         float out;      // температура окружающего среды
  > >}
  > >```



* `volume_t` **Значения уровня звука:**

  > uint8_t `id` = `0xc8`
  >
  > uint8_t  `data[2]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >        bool mute: 1;       // Выкл. звук
  > >        bool nop: 7;
  > >        uint8_t volume;     // Уровень звука
  > >}
  > >```



### Структура других пакетов

* **Информация об устройстве:**

  > **запрос:**
  >
  > uint8_t `id` = `0x05`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x05`
  >
  > uint8_t  `data[111]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >        uint8_t chip_cores;             // количество ядер
  > >        char chip_model[16];            // модель чипа
  > >        uint8_t chip_revision;          // номер ревизии чипа
  > >        uint32_t cpu_freq_mhz;          // частота ЦП, МГц
  > >        uint32_t cycle_count;           // количество циклов
  > >        uint64_t efuse_mac;             // MAC-адрес
  > >        uint8_t flash_chip_mode;        // режим флеш-памяти
  > >        uint32_t flash_chip_size;       // размер флеш-памяти, байт
  > >        uint32_t flash_chip_speed;      // частота флеш-памяти
  > >        uint32_t free_heap;             // свободной кучи в памяти
  > >        uint32_t free_psram;            // свободной SPI RAM
  > >        uint32_t free_sketch_space;     // свободное место для прошивки
  > >        uint32_t heap_size;             // размер кучи в памяти
  > >        uint32_t max_alloc_heap;        // размер самого большого блока кучи
  > >        uint32_t max_alloc_psram;       // размер самого большого блока SPI RAM
  > >        uint32_t min_free_heap;         // наименьший уровень свободной кучи
  > >        uint32_t min_free_psram;        // наименьший уровень свободной SPI RAM
  > >        uint32_t psram_size;            // размер SPI RAM
  > >        char sdk_version[8];            // версия SDK
  > >        char sketch_md5[16];            // MD5 прошивки
  > >        uint32_t sketch_size;           // размер прошивки
  > >        float temperature_chip;         // температура чипа
  > >}
  > >```



* **Текст Teyes:**

  > **запрос:**
  >
  > uint8_t `id` = `0x1f`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x1f`
  >
  > char`text[12]` = [..]



### Обновление прошивки

* **Загрузка файла прошивки:**

  > **запрос:**
  >
  > uint8_t `id` = `0x5a`
  >
  > uint8_t  `data[511]` = [..]
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x5a`
  >
  > uint8_t  `data[1]` = [`0x00` или `0x01`]
  >
  > > `0x00` Успех
  > >
  > > `0x01` Ошибка

* **Обновление прошивки:**

  > **запрос:**
  >
  > uint8_t `id` = `0x5b`



* **Загрузка файла прошивки в формате gz:**

  > **запрос:**
  >
  > uint8_t `id` = `0x5c`
  >
  > uint8_t  `data[511]` = [..]
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x5a`
  >
  > uint8_t  `data[1]` = [`0x00` или `0x01`]
  >
  > > `0x00` Успех
  > >
  > > `0x01` Ошибка

* **Обновление прошивки в формате gz:**

  > **запрос:**
  >
  > uint8_t `id` = `0x5d`
