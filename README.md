# PJCAN App
Проект CANBUS адаптера для Mazda 3 BK / CX-7 / CX-9 

Группа в телеграм: https://t.me/pjcan


# API 4.0.2



### Bluetooth:

* name `PJCAN`
* uuid server `cc9e7b30-9834-488f-b762-aa62f5022dd4`
* uuid characteristic `cc9e7b30-9834-488f-b762-aa62f5022dd4`



### Структура пакетов конфигурации:

* **Общая конфигурация:**

  > **запрос:**
  >
  > uint8_t `id` = `0x01`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x01`
  > 
  > uint8_t  `data[215]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   uint8_t version[4];     // Версия прошивки
  > >   device_t device;        // Параметры устройства
  > >   buttons_t buttons;      // Параметры кнопок
  > >   car_t car;              // Параметры автомобиля
  > >   teyes_t teyes;          // Параметры Teyes
  > >   variable_t variable;    // Параметры переменных
  > >}
  > >```



* `device_t` **Параметры устройства:**

  > uint8_t `id` = `0x0a`
  > 
  > uint8_t  `data[64]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   char serial[64];        // Серийный номер
  > >}
  > >```



* `buttons_t` **Параметры кнопок:**

  > uint8_t `id` = `0x14`
  >
  > uint8_t  `data[69]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >typedef struct
  > >{
  > >   bool delay_exec;        // Отложенное выполнения функции/события
  > >   bool nop: 7;
  > >   uint8_t hold;           // Время удержания кнопки, сек.
  > >   uint16_t in_r;          // Сопротивление нажатий
  > >   uint16_t out_r;         // Сопротивление эмуляции нажатий
  > >   uint8_t exec[5];        // Список ID функций кнопки
  > >} item_t
  > >
  > >struct
  > >{
  > >   bool enabled: 1;        // Вкл/выкл кнопок
  > >   bool out: 1;            // Вкл/выкл эмуляции кнопок
  > >   bool reset: 1;          // Сбросить значения
  > >   bool send_value: 1;     // Отправлять значение нажатой кнопки
  > >   bool nop: 4;
  > >   uint16_t range;         // Диапазон сигнала
  > >   item_t items[6];        // Настройки кнопок
  > >}
  > >```
  > >
  > >**Список ID функций кнопки**:
  > >
  > >`exec[0]` Кнопка отпущена
  > >
  > >`exec[1]` Кнопка нажата один раз
  > >
  > >`exec[2]` Кнопка нажата два раза
  > >
  > >`exec[3]` Кнопка нажата три раза
  > >
  > >`exec[4]` Удержание кнопки
  > >
  > >
  > >
  > >
  > >Значение `exec[..]`:
  > >
  > > >`0` Кнопка отпущена
  > > >
  > > >`1` Кнопка mode
  > > >
  > > >`2` Кнопка set up
  > > >
  > > >`3` Кнопка set down
  > > >
  > > >`4` Кнопка уровень звука +
  > > >
  > > >`5` Кнопка уровень звука -
  > > >
  > > >`6` Кнопка выкл. звука
  > > >
  > > >`7` Кнопка Clock на LCD
  > > >
  > > >`8` Кнопка Clock H на LCD
  > > >
  > > >`9` Кнопка Clock M на LCD
  > > >
  > > >`10` Кнопка Info на LCD
  > > >
  > > >`11` Кнопка показать значения ДВС
  > > >
  > > >`12` Кнопка показать значения расхода
  > > >
  > > >`13` Кнопка показать значения движения
  > > >
  > > >`14` Кнопка показать значения температуру



* `car_t` **Параметры автомобиля:**

  > uint8_t `id` = `0x32`
  > 
  > uint8_t  `data[48]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   bool lcd: 1;            // Вкл. вывод данных на lcd
  > >   bool nop: 7;
  > >   uint8_t car_model;      // Модель автомобиля
  > >   char logo[13];          // Логотип (последний символ не отображается)
  > >   char hello[33];         // Текст приветствия (последний символ не отображается)
  > >}
  > >```
  > >
  > > **Модели автомобиля** `car_model`:
  > > 
  > > >`0` Неизвестно
  > > >
  > > >`1` Mazda 3 BK
  > > >
  > > >`2` Mazda CX7



* `teyes_t` **Параметры Teyes:**

  > uint8_t `id` = `0x1e`
  >
  > uint8_t  `data[2]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   bool receive_clock: 1;      // Принимать время ГУ
  > >   bool receive_buttons: 1;    // Принимать кнопки ГУ: CLOCK, HOUR, MIN
  > >   bool receive_text: 1;       // Принимать текст ГУ (название радиостанций и др.)
  > >   bool send_button: 1;        // Отправлять ГУ нажатие кнопок на руле 
  > >   bool send_climate: 1;       // Отправлять ГУ значения климата
  > >   bool send_doors: 1;         // Отправлять ГУ статусы дверей автомобиля
  > >   bool parse_volume: 1;       // Парсинг значения уровня звука ГУ
  > >   bool lcd_show: 1;           // Показать текст ГУ на LCD экране
  > >   uint8_t uart_baud;          // Скорость Serial: 0xFD - 38400, 0xFC - 19200
  > >}
  > >```



* `variable_t` **Параметры переменных:**

  > **запрос:**
  >
  > uint8_t `id` = `0x64`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x64`
  > 
  > uint8_t  `data[28]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   bose_t bose;            // Параметры Bose
  > >   engine_t engine;        // Параметры ДВС
  > >   fuel_t fuel;            // Параметры расхода топлива
  > >   volume_t volume;        // Параметры уровня звука
  > >}
  > >```



* `bose_t` **Параметры Bose:**

  > uint8_t `id` = `0x6e`
  > 
  > uint8_t  `data[6]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   bool enabled: 1;        // Вкл/выкл
  > >   bool audio_plt: 1;      // Audio PLT
  > >   bool radio_fm: 1;       // Radio FM или AM
  > >   bool wow: 1;            // Wow
  > >   bool nop: 4;
  > >   int8_t balance;         // Баланс (от -8 до +8)
  > >   int8_t bass;            // Бас (от -6 до +6)
  > >   int8_t fade;            // Fade (от -8 до +8)
  > >   int8_t treble;          // Treble (от -6 до +6)
  > >   uint8_t center_point;   // Center point
  > >}
  > >```
  > >
  > >**Значения Center Point** `center_point`:
  > >
  > > >`0` off
  > > >
  > > >`1` min
  > > >
  > > >`2` low
  > > >
  > > >`3` mid
  > > >
  > > >`4` hi
  > > >
  > > >`5` max



* `engine_t` **Параметры ДВС:**

  > uint8_t `id` = `0x8d`
  > 
  > uint8_t  `data[17]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   bool show_days: 1;          // Показывать в статистике дни
  > >   bool nop: 7;
  > >   uint64_t total_worktime;    // Счетчик моточасов, сек.
  > >   uint64_t total_count_rpm;   // Счетчик коленчатого вала (RPM), об.
  > >}
  > >```



* `fuel_t` **Параметры расхода топлива:**

  > uint8_t `id` = `0x97`
  > 
  > uint8_t  `data[2]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   uint16_t ratio;        // Коэффициент (n/1000) 0.001 до 1
  > >}
  > >```



* `volume_t` **Параметры уровня звука:**

  > uint8_t `id` = `0xc9`
  >
  > uint8_t  `data[3]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   bool mute: 1;       // Выкл. звук
  > >   bool bose_only: 1;  // Управлять только Bose
  > >   bool nop: 7;
  > >   uint8_t volume;     // Уровень звука
  > >   uint8_t max;        // Максимальный уровень звука
  > >}
  > >```



### Структура пакетов конфигурации отображения на LCD экране:

**Общая структура отображения:**

```c++
struct {
    bool enabled: 1;        // Вкл/выкл отображения
    bool nop: 7;
    uint8_t type;           // Тип отображения текста
    uint16_t time;          // Время отображения на LCD, сек.
} view_t;
```
**Значения типов отображения** `type`:

> `0` Простое отображение текста
> 
> `1` Мигающий текст
> 
> `2` Бегущая строка



* **Общая конфигурация отображения:**

  > **запрос:**
  >
  > uint8_t `id` = `0x02`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x02`
  >
  > uint8_t  `data[108]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   car_t car;              // Параметры автомобиля
  > >   view_t teyes;           // Параметры Teyes
  > >   variable_t variable;    // Параметры переменных
  > >}
  > >```



* `car_t` **Параметры отображения автомобиля:**

  > uint8_t `id` = `0x33`
  >
  > uint8_t  `data[8]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   view_t logo;        // Параметры отображения логотипа
  > >   view_t hello;       // Параметры отображения текста приветствия
  > >}
  > >```



* `view_t` **Параметры отображения Teyes:**

  > uint8_t `id` = `0x20`
  >
  > uint8_t  `data[4]` = [..]



* `variable_t` **Параметры отображения переменных:**

  > **запрос:**
  >
  > uint8_t `id` = `0x65`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x65`
  >
  > uint8_t  `data[96]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   view_t bose;            // Параметры отображения Bose
  > >   view_t climate;         // Параметры отображения климата
  > >   view_t clock;           // Параметры отображения часов
  > >   view_t doors;           // Параметры отображения дверей
  > >   engine_t engine;        // Параметры отображения ДВС
  > >   fuel_t fuel;            // Параметры отображения расхода топлива
  > >   movement_t movement;    // Параметры отображения движения
  > >   sensors_t sensors;      // Параметры отображения датчиков
  > >   view_t temperature;     // Параметры отображения температуры
  > >   view_t volume;          // Параметры отображения уровня звука
  > >}
  > >```



* `view_t` **Параметры отображения Bose:**

  > uint8_t `id` = `0x6f`
  >
  > uint8_t  `data[4]` = [..]



* `view_t` **Параметры отображения климата:**

  > uint8_t `id` = `0x79`
  >
  > uint8_t  `data[4]` = [..]



* `view_t` **Параметры отображения дверей:**

  > uint8_t `id` = `0x83`
  >
  > uint8_t  `data[4]` = [..]



* `engine_t` **Параметры отображения ДВС:**

  > uint8_t `id` = `0x8e`
  >
  > uint8_t  `data[28]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   view_t enabled;             // Параметры отображения запуска/остановки двигателя
  > >   view_t total_seconds;       // Параметры отображения общего времени работы двигателя
  > >   view_t total_count_rpm;     // Параметры отображения общего количества оборотов (RPM)
  > >   view_t coolant;             // Параметры отображения охлаждающей жидкости
  > >   view_t rpm;                 // Параметры отображения текущее количество оборотов (RPM)
  > >   view_t load;                // Параметры отображения текущая нагрузка на двигатель, %
  > >   view_t throttle;            // Параметры отображения положения дроссельной заслонки, %
  > >}
  > >```



* `fuel_t` **Параметры отображения расхода топлива:**

  > uint8_t `id` = `0x98`
  >
  > uint8_t  `data[16]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   view_t consumption;
  > >   view_t current;         // Параметры отображения текущего расхода топлива
  > >   view_t avg;             // Параметры отображения среднего расхода топлива
  > >   view_t total;
  > >}
  > >```



* `movement_t` **Параметры отображения движения:**

  > uint8_t `id` = `0xa1`
  >
  > uint8_t  `data[12]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   view_t speed;           // Параметры отображения текущей скорости автомобиля
  > >   view_t speed_avg;       // Параметры отображения средней скорости автомобиля
  > >   view_t rest_way;        // Параметры отображения км. оставшегося пути
  > >}
  > >```



* `sensors_t` **Параметры отображения датчиков:**

  > uint8_t `id` = `0xab`
  >
  > uint8_t  `data[16]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   view_t handbrake;       // Параметры отображения положения ручника
  > >   view_t reverse;         // Параметры отображения статуса заднего хода
  > >   view_t seatbelt;        // Параметры отображения статуса ремней безопасности
  > >   view_t signal;          // Параметры отображения сигнала поворота
  > >}
  > >```



* `view_t` **Параметры отображения температуры:**

  > uint8_t `id` = `0xb5`
  >
  > uint8_t  `data[4]` = [..]



* `view_t` **Параметры отображения уровня звука:**

  > uint8_t `id` = `0xca`
  >
  > uint8_t  `data[4]` = [..]



### Структура пакетов значений

* **Общие значения:**

  > **запрос:**
  >
  > uint8_t `id` = `0x03`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x03`
  >
  > uint8_t  `data[89]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   device_t device;            // Значения устройства
  > >   lcd_t lcd;                  // Значения LCD
  > >   variable_t variable;        // Значения переменных
  > >}
  > >```



* `device_t` **Значения устройства:**

  > uint8_t `id` = `0x0b`
  >
  > uint8_t  `data[10]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   bool reboot: 1;             // Перезагрузка устройства
  > >   bool reset_config: 1;       // Сбросить конфигурацию
  > >   bool reset_view: 1;         // Сбросить конфигурацию отображения
  > >   bool activation: 1;         // Статус активации
  > >   bool save: 1;               // Сохранить данные принудительно
  > >   bool format: 1;             // Форматирование SPIFFS с сохранением параметров
  > >   bool nop: 2;
  > >   led_t led: 8;               // Состояние мигания светодиода
  > >   uint64_t worktime;          // Время работы устройства
  > >}
  > >```
  > >`led_t` **Значения состояния мигания светодиода**:
  > >
  > >>`0` Светодиод не горит
  > >>
  > >>`1` Светодиод горит
  > >>
  > >>`2` Светодиод мигает с указанным интервалом
  > >>
  > >>`3` Двойное мигание светодиодом, с указанным интервалом
  > >>
  > >>`4` Тройное мигание светодиодом, с указанным интервалом



* `lcd_t` **Значения LCD:**

  > uint8_t `id` = `0x28`
  >
  > uint8_t  `data[15]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   bool ico_cdin: 1;           // CD IN
  > >   bool ico_mdin: 1;           // MD IN
  > >   bool ico_st: 1;             // ST
  > >   bool ico_dolby: 1;          // Dolby
  > >   bool ico_rpt: 1;            // RPT
  > >   bool ico_rdm: 1;            // RDM
  > >   bool ico_af: 1;             // AF
  > >   bool ico_pty: 1;            // PTY
  > >   bool ico_ta: 1;             // TA
  > >   bool ico_tp: 1;             // TP
  > >   bool ico_autom: 1;          // AUTO-M
  > >   bool char_s1: 1;            // Символ ":" между 3-м и 4-м символами
  > >   bool char_s2: 1;            // Символ "‘" между 11-м и 12-м символами
  > >   bool char_s3: 1;            // Символ "." между 11-м и 12-м символами
  > >   bool char_s4: 1;            // Символ "." между 10-м и 11-м символами
  > >   bool btn_change: 1;         // Изменения при нажатии кнопок или вращающихся регуляторов
  > >   bool btn_info: 1;           // Кнопка Info
  > >   bool btn_clock: 1;          // Кнопка Clock
  > >   bool btn_clock_m: 1;        // Кнопка M (в режиме установки времени)
  > >   bool btn_clock_h: 1;        // Кнопка H (в режиме установки времени)
  > >   bool btn_clock_rm: 1;       // Сброс минут в 0
  > >   bool flg_clock_24: 1;       // true = 24 ч., false = 12 ч. формат времени (в режиме установки времени)
  > >   bool nop: 2;
  > >   char buffer[12];            // Буфер строки для отображения на LCD
  > >}
  > >```



* `variable_t` **Значения переменных:**

  > **запрос:**
  >
  > uint8_t `id` = `0x66`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x66`
  >
  > uint8_t  `data[64]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   climate_t climate;          // Значения климата
  > >   clock_t clock;              // Значения времени
  > >   doors_t doors;              // Значения дверей автомобиля
  > >   engine_t engine;            // Значения ДВС
  > >   fuel_t fuel;                // Значения расхода топлива
  > >   movement_t movement;        // Значения движения
  > >   sensors_t sensors;          // Значения датчиков
  > >   temperature_t temperature;  // Значения температуры
  > >}
  > >```



* `variable_t` **Значения климата:**

  > **запрос:**
  >
  > uint8_t `id` = `0x78`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x78`
  >
  > uint8_t  `data[7]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   bool enabled: 1;                // Статус работы блока климата
  > >   bool automode: 1;               // Автоматический режим работы блока климата
  > >   bool ac: 1;                     // Статус работы кондиционера
  > >   bool air_dlegs: 1;              // Направление воздушного потока в ноги
  > >   bool air_dbody: 1;              // Направление воздушного потока в туловище
  > >   bool air_dwindshield: 1;        // Направление воздушного потока в ветровое стекло
  > >   bool air_dback_win: 1;          // Подогрев заднего стекла
  > >   bool eco: 1;                    // Режим eco
  > >   uint8_t air_rate;               // Скорость воздушного потока (от минимального 1 до максимального 7)
  > >   uint8_t air_type;               // Вентиляция салона
  > >   uint8_t temp_type;              // Измерение температуры (градусы Цельсия или Фаренгейта)
  > >   uint8_t temp_display;           // Отображение температуры
  > >   uint16_t temperature;           // Температура (n/10)
  > >}
  > >```
  > >**Тип вентиляции салона** `air_type`:
  > >
  > > >`0` Нет вентиляции
  > > >
  > > >`1` Забор воздуха из кабины пилота
  > > >
  > > >`2` Забор воздуха снаружи самолета
  > >
  > >**Тип измерения температуры** `temp_type`:
  > >
  > > >`0` по Хую
  > > >
  > > >`1` по Цельсию
  > > >
  > > >`2` по Фаренгейту



* `clock_t` **Значения времени:**

  > uint8_t  `data[3]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   uint8_t hour;           // Часы
  > >   uint8_t minutes;        // Минуты
  > >   uint8_t seconds;        // Секунды
  > >}
  > >```



* `doors_t` **Значения дверей автомобиля:**

  > **запрос:**
  >
  > uint8_t `id` = `0x82`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x82`
  >
  > uint8_t  `data[1]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   bool front_left: 1;         // Передняя левая дверь
  > >   bool front_right: 1;        // Передняя правая дверь
  > >   bool back_left: 1;          // Задняя левая дверь
  > >   bool back_right: 1;         // Задняя правая дверь
  > >   bool trunk: 1;              // Багажник
  > >   bool nop: 3;
  > >}
  > >```



* `engine_t` **Значения ДВС:**

  > **запрос:**
  >
  > uint8_t `id` = `0x8c`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x8c`
  >
  > uint8_t  `data[25]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   bool enabled: 1;                // Статус работы двигателя
  > >   bool nop: 7;
  > >   int8_t coolant;                 // Температура охлаждающей жидкости
  > >   uint16_t rpm;                   // Количество оборотов коленчатого вала (RPM)
  > >   uint32_t worktime;              // Время работы двигателя с момента его запуска, сек.
  > >   uint32_t count_rpm;             // Счетчик RPM с момента запуска двигателя, об.
  > >   uint16_t load;                  // Нагрузка на ДВС, % (n/1000)
  > >   uint16_t throttle;              // Положение дроссельной заслонки, % (n/100)
  > >   uint16_t view_days;             // Счетчик моточасов, дней
  > >   uint8_t view_hours;             // Счетчик моточасов, часов
  > >   uint8_t view_minutes;           // Счетчик моточасов, минут
  > >   uint8_t view_seconds;           // Счетчик моточасов, секунд
  > >   uint32_t view_count_rpm;        // Счетчик коленчатого вала (RPM), тыс.об.
  > >}
  > >```



* `fuel_t` **Значения расхода топлива:**

  > **запрос:**
  >
  > uint8_t `id` = `0x96`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x96`
  >
  > uint8_t  `data[12]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   uint32_t consumption;       // Текущий расход топлива, л/ч (экспериментальное значение) (n/100)
  > >   uint16_t current;           // Текущий расход топлива, л/100 км (n/10)
  > >   uint16_t avg;               // Средний расход топлива, л/100 км (n/10)
  > >   uint32_t total;             // Текущее количество топлива, л (экспериментальное значение) (n/100)
  > >}
  > >```



* `movement_t` **Значения движения:**

  > **запрос:**
  >
  > uint8_t `id` = `0xa0`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0xa0`
  >
  > uint8_t  `data[10]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   uint32_t speed;         // Скорость автомобиля, км/ч (n/100)
  > >   uint16_t speed_avg;     // Средняя скорость, км/ч
  > >   uint32_t rest_way;      // Остаток пути, км (n/100)
  > >}
  > >```



* `sensors_t` **Значения датчиков:**

  > **запрос:**
  >
  > uint8_t `id` = `0xaa`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0xaa`
  >
  > uint8_t  `data[2]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   bool acc: 1;                    // Статус ACC
  > >   bool handbrake: 1;              // Положение ручного тормоза
  > >   bool reverse: 1;                // Задний ход
  > >   bool seatbelt_driver: 1;        // Статус ремня безопасности водителя
  > >   bool seatbelt_passenger: 1;     // Статус ремня безопасности пассажира
  > >   bool nop: 3;
  > >   uint8_t signal;                 // Сигнал поворотника
  > >}
  > >```
  > >**Тип сигала поворотника** `signal`:
  > >
  > > >`0` Выключен
  > > >
  > > >`1` Левый сигнал поворота
  > > >
  > > >`2` Правый сигнал поворота
  > > >
  > > >`3` Сигнал аварийной остановки



* `temperature_t` **Значения температуры:**

  > **запрос:**
  >
  > uint8_t `id` = `0xb4`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0xb4`
  >
  > uint8_t  `data[4]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   uint16_t in;        // Температура в салоне (показывает температуру окружающего среды, хз почему так) (n/10)
  > >   uint16_t out;       // Температура окружающего среды (n/10)
  > >}
  > >```



### Структура других пакетов

* **Информация об устройстве:**

  > **запрос:**
  >
  > uint8_t `id` = `0x05`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x05`
  >
  > uint8_t  `data[143]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   uint8_t chip_cores;                 // Количество ядер
  > >   char chip_model[16];                // Модель чипа
  > >   uint8_t chip_revision;              // Номер ревизии чипа
  > >   uint32_t cpu_freq_mhz;              // Частота ЦП, МГц
  > >   uint32_t cycle_count;               // Количество циклов
  > >   uint64_t efuse_mac;                 // MAC-адрес
  > >   uint8_t flash_chip_mode;            // Режим флеш-памяти
  > >   uint32_t flash_chip_size;           // Размер флеш-памяти, байт
  > >   uint32_t flash_chip_speed;          // Частота флеш-памяти
  > >   uint32_t free_heap;                 // Свободной кучи в памяти
  > >   uint32_t free_psram;                // Свободной SPI RAM
  > >   uint32_t free_sketch_space;         // Свободное место для прошивки
  > >   uint32_t heap_size;                 // Размер кучи в памяти
  > >   uint32_t max_alloc_heap;            // Размер самого большого блока кучи
  > >   uint32_t max_alloc_psram;           // Размер самого большого блока SPI RAM
  > >   uint32_t min_free_heap;             // Наименьший уровень свободной кучи
  > >   uint32_t min_free_psram;            // Наименьший уровень свободной SPI RAM
  > >   uint32_t psram_size;                // Размер SPI RAM
  > >   char sdk_version[8];                // Версия SDK
  > >   char sketch_md5[16];                // MD5 прошивки
  > >   uint32_t sketch_size;               // Размер прошивки
  > >   uint32_t temperature_chip;          // Температура чипа (n/100)
  > >   uint8_t sha[DEVICE_HASH_SIZE];      // Хеш устройства
  > >}
  > >```



* **Текст Teyes:**

  > **запрос:**
  >
  > uint8_t `id` = `0x1f`
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x1f`
  >
  > char`text[12]` = [..]



### Обновление прошивки

  > **запрос:**
  >
  > uint8_t `id` = `0x5a`
  >
  > uint8_t  `data[503]` = [..]
  >
  > >**Структура** `data`:
  > >
  > >
  > >```c++
  > >struct
  > >{
  > >   bool begin: 1;          // Начало прошивки
  > >   bool end: 1;            // Завершение прошивки и перезагрузка
  > >   bool abort: 1;          // Отмена прошивки
  > >   bool encrypt: 1;        // Зашифрованные данные
  > >   bool iv: 1;             // Данные IV
  > >   bool nop: 3;
  > >   uint32_t total;         // Размер прошивки
  > >   uint16_t size;          // Размер данных
  > >   uint8_t data[496];      // Данные прошивки
  > >}
  > >```
  >
  > **ответ:**
  >
  > uint8_t `id` = `0x5a`
  >
  > uint8_t  `data[1]`
  >
  > >**Ответ**:
  > >
  > > >`0` ОК
  > > >
  > > >`1` Нет данных
  > > >
  > > >`2` Нет данных для начала прошивки
  > > >
  > > >`3` Ошибка начала прошивки
  > > >
  > > >`4` Ошибка записи прошивки
  > > >
  > > >`5` Ошибка прошивки
  > > >
  > > >`6` Нет значения IV
  > > >
  > > >`7` Неверный ключ шифрования
  > > >
  > > >`8` Ошибка дешифровки прошивки
